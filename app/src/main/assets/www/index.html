<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <style>
        body {
        font-family: Verdana, sans-serif;
        font-size: 8pt;
        line-height: 12pt;
        background: #ffffff;
        color: #555555;
        }

        .axis path, .axis line {
        fill: none;
        stroke: #555555;
        shape-rendering: crispEdges;
        }

        .line {
        fill: none;
        stroke: orange;
        stroke-width: 1px;
        }
    </style>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>D3</title>

    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
</head>
<body>
<h4>Animated line chart</h4>
<script type="text/javascript">
            function showData() {

                var t = -1;
                var n = 40;
                var v = 10;
                var data = d3.range(n).map(next);

                this.setV = function (value) {
                    v = value;
                }

                function getV () {
                    return v;
                }

                function next () {
                    return {
                        time: ++t,
                        value: v
                        // value: v = Math.floor(Math.random()*20)
                    };
                }

                var margin = {top: 10, right: 10, bottom: 20, left: 40},
                width = 300 - margin.left - margin.right,
                height = 340 - margin.top - margin.bottom;

                var x = d3.scale.linear()
                .domain([0, n - 1])
                .range([0, width]);

                var y = d3.scale.linear()
                .domain([0, 20])
                .range([height, 0]);

                var line = d3.svg.line()
                .x(function(d, i) { console.log(d.time); return x(d.time); })
                .y(function(d, i) { return y(d.value); });

                var svg = d3.select("body").append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom);

                var g = svg.append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

                var graph = g.append("svg")
                .attr("width", width)
                .attr("height", height + margin.top + margin.bottom);

                var xAxis = d3.svg.axis().scale(x).orient("bottom");
                var axis = graph.append("g")
                .attr("class", "x axis")
                .attr("transform", "translate(0," + height + ")")
                .call(xAxis);

                g.append("g")
                .attr("class", "y axis")
                .call(d3.svg.axis().scale(y).orient("left"));

                var path = graph.append("g")
                .append("path")
                .data([data])
                .attr("class", "line")
                .attr("d", line);

                tick();

                function tick()
                {
                    // push a new data point onto the back
                    data.push(next());

                    // update domain
                    x.domain([t - n, t]);

                    // redraw path, shift path left
                    path
                    .attr("d", line)
                    .attr("transform", null)
                    .transition()
                    .duration(500)
                    .ease("linear")
                    .attr("transform", "translate(" + t - 1 + ")")
                    .each("end", tick);

                    // shift axis left
                    axis
                    .transition()
                    .duration(500)
                    .ease("linear")
                    .call(d3.svg.axis().scale(x).orient("bottom"));

                    // pop the old data point off the front
                    data.shift();
                }
            }

        </script>
</body>
</html> -->

<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        .axis path, .axis line {
        fill: none;
        stroke: #777;
        shape-rendering: crispEdges;
        }

        .text {
        font-family: 'Arial';
        font-size: 14px;
        }

        .axis text {
        font-family: 'Arial';
        font-size: 13px;
        }

        .bar {
        fill: FireBrick;
        }

        .grid .tick {
        stroke: grey;
        opacity: 0.7;
        }

        .grid path {
        stroke-width: 0;
        }

        .tick line {
        stroke: lightgrey;
        opacity: 0.7;
        }
    </style>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="_/base.css">
    <link rel="stylesheet" href="style.css">
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
</head>
<body>
<div class="container">
    <div id="chart"> </div>
    </section>
</div>

<script type="text/javascript">
            //InitChart();

            function InitChart(screenWidth, screenHeight) {

                var lineData = [{
                                'x': 1,
                                'y': 5
                                }, {
                                'x': 20,
                                'y': 20
                                }, {
                                'x': 40,
                                'y': 10
                                }, {
                                'x': 60,
                                'y': 40
                                }, {
                                'x': 80,
                                'y': 5
                                }, {
                                'x': 100,
                                'y': 60
                                }];

                this.setData = function (dv, iv) {
                    var v = dv;
                }

                var MARGINS = {
                    top: 10,
                    right: 10,
                    bottom: 20,
                    left: 30
                };

                var WIDTH = screenWidth - MARGINS.left - MARGINS.right;
                var HEIGHT = screenHeight - MARGINS.top - MARGINS.bottom;

                var vis = d3.select('#chart').append('svg')
                //.style('background', '#F0F3F5')
                .attr('width', WIDTH + MARGINS.right)
                .attr('height', HEIGHT + MARGINS.top)
                .text("time", "depth");

                //range of the x and y
                xRange = d3.scale.linear()
                .range([MARGINS.left, WIDTH - MARGINS.right])
                .domain([d3.min(lineData,
                                function (d) {
                                return d.x;
                                }),
                         d3.max(lineData, function (d) {
                                return d.x;
                                })
                         ]),

                 yRange = d3.scale.linear()
                 .range([HEIGHT - MARGINS.top, MARGINS.bottom])
                 .domain(
                         [d3.max(lineData, function (d) {
                                 return d.y;
                                 }),
                          d3.min(lineData, function (d) {
                                 return d.y;
                                 })]
                         ),

                  //UI x and y axis stuff
                  xAxis = d3.svg.axis()
                  .scale(xRange)
                  .tickSize(5)
                  .orient("top")
                  .innerTickSize(-HEIGHT + MARGINS.top + MARGINS.bottom)
                  .outerTickSize(0)
                  .tickPadding(5),

                  yAxis = d3.svg.axis()
                  .scale(yRange)
                  .tickSize(5)
                  .orient("left")
                  .innerTickSize(-WIDTH + MARGINS.left + MARGINS.right)
                  .outerTickSize(0)
                  .tickPadding(5);

                  //add to the graphs
                  vis.append("svg:g")
                  .attr("class", "x axis")
                  .attr("transform", "translate(0," + (MARGINS.bottom + MARGINS.top) + ")")
                  .call(xAxis);

                  // text label for the x axis
                  vis.append("svg:text")
                  .attr("class", "text")
                  .attr("x", screenWidth / 2 )
                  .attr("y",  MARGINS.top )
                  .style("text-anchor", "middle")
                  .text("Time");

                  vis.append("svg:g")
                  .attr("class", "y axis")
                  .attr("transform", "translate(" + (MARGINS.left) + ", " +  (MARGINS.top) + ")")
                  .call(yAxis);

                  vis.append("svg:text")
                  .attr("class", "text")
                  .attr("transform", "rotate(-90)")
                  .attr("x",  -MARGINS.top - MARGINS.bottom)
                  //.attr("y",  MARGINS.left)
                  .attr("dy", "1em")
                  .style("text-anchor", "middle")
                  .text("Value");

                  //drawing the line
                  var lineFunc = d3.svg.line()
                  .x(function (d) {
                     return xRange(d.x);
                     })
                     .y(function (d) {
                        return yRange(d.y);
                        })
                        .interpolate('linear');

                  vis.append("svg:path")
                     .attr("d", lineFunc(lineData))
                     .attr("stroke", "blue")
                     .attr("stroke-width", 2)
                     .attr("fill", "none")
                     .attr('transform', 'translate(' + 0 + ', ' + MARGINS.top + ')');

            }
        </script>
</body>
</html>